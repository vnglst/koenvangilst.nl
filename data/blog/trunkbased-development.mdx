---
title: Why I Prefer Trunk-Based Development
publishedAt: 2023-11-10
image:
  src: /static/images/trunkbased.png
  alt: A picture of a tree with branches generated by DALL-E
  width: 1024
  height: 1024
  showAsHeader: false
summary: Embracing trunk-based development marked a significant shift in my web development workflow, moving away from the structured Git Flow to a more continuous approach.
tags:
  - git
  - continuous deployment
  - trunk-based development
---

As someone who has been involved in web development for years, I've had my fair share of experiences with different branching strategies.
Over time, I've grown to prefer trunk-based development (TBD) for its simplicity and alignment with continuous deployment, especially when compared to the more traditional Git Flow model.

Before delving into why I prefer this approach, let's quickly recap the main difference between TBD and Git Flow.[^1]

## TBD vs. Git Flow

The essence of the difference lies in their branching strategies. Trunk-based development, also known as [GitHub Flow](https://docs.github.com/en/get-started/quickstart/github-flow) in some circles, revolves around a main _trunk_ branch. Developers work either directly on this trunk or on short-lived branches that are merged back frequently.

Git Flow, in contrast, involves multiple branches (feature, develop, release, hotfix), each serving a specific stage in the development cycle. This model suits environments where releases are less frequent.

## Appeal of trunk-based development

What draws me to TBD is its straightforward approach. Here’s why I find it effective:

- One source of truth: With only one branch that represents the latest state of the codebase, there’s no confusion about which branch is the most up-to-date.
- Simplified workflow: Fewer branches translate to less complexity. It makes the workflow more manageable, especially for new team members. It also reduces the risk of merge conflicts.
- Quick Integration: Merging changes frequently into the trunk means we can integrate and test new features more rapidly. There's always only one version of the codebase to test & integrate with.

## Overcoming resistance

When I first encountered trunk-based development (TBD), I was hesitant. As a developer used to aligning branches with specific environments - develop for development, acceptance for testing, and main for production - this new approach seemed disruptive to my established workflow.

The idea of a single `trunk` where most development happens, contradicted my understanding of structured, organized development. But our tech lead at the time introduced this change to our team and as I experienced the new way of working, my perspective began to shift. I realized the excessive complexity that came with maintaining multiple long-lived branches and the slow pace it enforced on our processes.

At first, our team was scared by the fact that every pull request we merged automatically landed on the main branch and that our tech lead said we had to make sure the code was always in a releasable state. This was a stark departure from the safety net we felt with Git Flow, where multiple branches provided a cushion before hitting production. The notion of having every change be potentially release-ready brought a new level of accountability and focus to our work.

Gradually, however, this fear transformed into a powerful motivator. We became more vigilant with our code reviews, ensuring that anything merged into the trunk was robust and thoroughly tested. This constant state of readiness encouraged us to develop cleaner, more reliable code.

## Feature toggles

Another thing that seemed impractical was building large features or doing complex refactors that could take weeks to complete. How could we do that with short-lived branches and still keep the main branch in a releasable state? The answer lay in the concept of feature toggles.

Feature toggles, also known as feature flags, allowed us to merge partial or incomplete features into the main branch without disrupting the user experience. By wrapping new functionalities in these toggles, we could deploy them turned 'off' and then activate them when ready. This approach gave us the flexibility to continuously integrate and test our changes in a live environment, without exposing them to end-users prematurely.

The adoption of feature toggles required a shift in our mindset. We had to plan our development in a way that allowed incremental changes and think ahead about how features could be toggled on and off. This planning led to more modular and adaptable code, which, in turn, increased our overall efficiency and responsiveness.

## TBD for immature projects

Not every development team is at a stage where they can reliably maintain the main branch in a releasable state. Sometimes there is limited or no testing capacity, sometimes there are no automated tests yet. These shortcomings can be overcome by being pragmatic about trunk-based development (TBD). As a team, you can choose to first create a release branch from the trunk every time you're ready for a release.

This approach serves as a middle ground, especially for teams in the transition phase or those still developing their testing infrastructure. By branching off a release branch, teams can have a buffer zone for final testing and polishing without compromising the main branch's integrity. This step provides a safety net for performing additional checks and balances that are not yet integrated into the daily development workflow.

It's good to take into account that any new commits should still land on the main trunk first and should then be cherry-picked to the release branch. The [excellent website on trunk-based development](https://trunkbaseddevelopment.com/) explains in great detail the different approaches teams can take here. This way developers can mix and match the different branching strategies depending on the maturity level of their CI/CD setup.

## Conclusion

In conclusion, my evolution as a web developer, from a Git Flow enthusiast to a staunch advocate of trunk-based development (TBD), has been a journey of adapting to a more dynamic and streamlined workflow. Initially hesitant, I've come to appreciate the clarity and simplicity of TBD. This shift has not only refined the development practices of the teams I was in but also instilled a mindset geared towards continuous, incremental improvement.

Trunk-based development, in my experience, represents more than just a branching strategy; it's a reflection of a modern, responsive approach to software development.

[^1]: The concept of Git Flow was originally introduced in the blog post [A successful Git branching model](https://nvie.com/posts/a-successful-git-branching-model/) by Vincent Driessen. His diagram of Git Flow has since then been shared countless times with many teams and on many corporate websites. In 2020 Vincent added a comment that Git Flow is not for everyone, especially when a team is doing continuous deployment.

{
  "title": "Of Bundles and Barrels",
  "publishedAt": "2021-11-17",
  "summary": "Why index barrel files can lead to large bundle sizes",
  "tags": [
    "article",
    "code quality",
    "typescript"
  ],
  "tagsAsSlugs": [
    "article",
    "code-quality",
    "typescript"
  ],
  "slug": "of-bundles-and-barrels",
  "code": "var Component=(()=>{var p=Object.create;var t=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var u=Object.getOwnPropertyNames;var k=Object.getPrototypeOf,N=Object.prototype.hasOwnProperty;var g=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports),f=(a,e)=>{for(var s in e)t(a,s,{get:e[s],enumerable:!0})},c=(a,e,s,r)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let o of u(e))!N.call(a,o)&&o!==s&&t(a,o,{get:()=>e[o],enumerable:!(r=m(e,o))||r.enumerable});return a};var y=(a,e,s)=>(s=a!=null?p(k(a)):{},c(e||!a||!a.__esModule?t(s,\"default\",{value:a,enumerable:!0}):s,a)),w=a=>c(t({},\"__esModule\",{value:!0}),a);var i=g((j,l)=>{l.exports=_jsx_runtime});var b={};f(b,{default:()=>h,frontmatter:()=>x});var n=y(i()),x={title:\"Of Bundles and Barrels\",publishedAt:\"2021-11-17\",summary:\"Why index barrel files can lead to large bundle sizes\",tags:[\"article\",\"code quality\",\"typescript\"]};function d(a){let e={a:\"a\",code:\"code\",p:\"p\",pre:\"pre\",span:\"span\",...a.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.p,{children:\"Until recently I've been an unequivocal fan of so-called barrel files. They work like this:\"}),`\n`,(0,n.jsx)(e.pre,{className:\"language-ts\",children:(0,n.jsxs)(e.code,{className:\"language-ts code-highlight\",children:[(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token comment\",children:\"// src/components/index.js\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"export\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"*\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'./Foo'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"export\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"*\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'./Bar'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]}),(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"export\"}),\" \",(0,n.jsx)(e.span,{className:\"token operator\",children:\"*\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'./FooBar'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]})]})}),`\n`,(0,n.jsx)(e.p,{children:\"Which allows you to use components like this:\"}),`\n`,(0,n.jsx)(e.pre,{className:\"language-ts\",children:(0,n.jsx)(e.code,{className:\"language-ts code-highlight\",children:(0,n.jsxs)(e.span,{className:\"code-line\",children:[(0,n.jsx)(e.span,{className:\"token keyword\",children:\"import\"}),\" \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"{\"}),\" Foo\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" Bar\",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\",\"}),\" FooBar \",(0,n.jsx)(e.span,{className:\"token punctuation\",children:\"}\"}),\" \",(0,n.jsx)(e.span,{className:\"token keyword\",children:\"from\"}),\" \",(0,n.jsx)(e.span,{className:\"token string\",children:\"'src/components'\"}),(0,n.jsx)(e.span,{className:\"token punctuation\",children:\";\"}),`\n`]})})}),`\n`,(0,n.jsxs)(e.p,{children:[\"Short and sweet! For this reason, I'm also a happy user of the VSCode plugin \",(0,n.jsx)(e.a,{href:\"https://marketplace.visualstudio.com/items?itemName=mikehanson.auto-barrel\",children:\"Auto-barrel\"}),\" which helps with creating/updating these barrel files.\"]}),`\n`,(0,n.jsx)(e.p,{children:\"I did recently discover, however, that this pattern can have unwanted side effects. Re-exporting all your imports in an index file can result in large bundle sizes.\"}),`\n`,(0,n.jsxs)(e.p,{children:[\"I gave it a try on one of the projects I'm working on (using Next.js) and lo and behold: Removing the barrel in the \",(0,n.jsx)(e.code,{children:\"/components/ui\"}),\" folder reduced the initial bundle size by more than 35kb. The culprit: In the \",(0,n.jsx)(e.code,{children:\"ui\"}),\" folder was a \",(0,n.jsx)(e.code,{children:\"RichTextEditor\"}),\" component of 35 kB. Since it was re-exported this was included on every page using a component from the ui folder.\"]}),`\n`,(0,n.jsx)(e.p,{children:\"So be careful what you put in your barrels, if you care about bundle size!\"})]})}function h(a={}){let{wrapper:e}=a.components||{};return e?(0,n.jsx)(e,{...a,children:(0,n.jsx)(d,{...a})}):d(a)}return w(b);})();\n;return Component;",
  "readingTime": {
    "text": "1 min read",
    "minutes": 0.895,
    "time": 53700,
    "words": 179
  }
}
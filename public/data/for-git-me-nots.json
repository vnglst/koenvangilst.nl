{
  "title": "Forgit me nots",
  "publishedAt": "2019-08-11",
  "summary": "Git commands I keep forgetting",
  "tags": [
    "article",
    "git"
  ],
  "tagsAsSlugs": [
    "article",
    "git"
  ],
  "slug": "for-git-me-nots",
  "code": "var Component=(()=>{var m=Object.create;var i=Object.defineProperty;var g=Object.getOwnPropertyDescriptor;var p=Object.getOwnPropertyNames;var u=Object.getPrototypeOf,N=Object.prototype.hasOwnProperty;var f=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),b=(n,e)=>{for(var s in e)i(n,s,{get:e[s],enumerable:!0})},r=(n,e,s,l)=>{if(e&&typeof e==\"object\"||typeof e==\"function\")for(let c of p(e))!N.call(n,c)&&c!==s&&i(n,c,{get:()=>e[c],enumerable:!(l=g(e,c))||l.enumerable});return n};var k=(n,e,s)=>(s=n!=null?m(u(n)):{},r(e||!n||!n.__esModule?i(s,\"default\",{value:n,enumerable:!0}):s,n)),w=n=>r(i({},\"__esModule\",{value:!0}),n);var t=f((x,o)=>{o.exports=_jsx_runtime});var v={};b(v,{default:()=>d,frontmatter:()=>y});var a=k(t()),y={title:\"Forgit me nots\",publishedAt:\"2019-08-11\",summary:\"Git commands I keep forgetting\",tags:[\"article\",\"git\"]};function h(n){let e={a:\"a\",code:\"code\",h2:\"h2\",h3:\"h3\",p:\"p\",pre:\"pre\",span:\"span\",...n.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(e.h2,{id:\"squashing-commits-on-windows\",children:[(0,a.jsx)(e.a,{className:\"anchor\",href:\"#squashing-commits-on-windows\",children:(0,a.jsx)(e.span,{className:\"icon icon-link\"})}),\"Squashing commits on Windows\"]}),`\n`,(0,a.jsx)(e.p,{children:\"I know there's a better way to do this (using rebase) but I like this way since it gives me more control.\"}),`\n`,(0,a.jsx)(e.pre,{className:\"language-bash\",children:(0,a.jsxs)(e.code,{className:\"language-bash code-highlight\",children:[(0,a.jsxs)(e.span,{className:\"code-line\",children:[(0,a.jsx)(e.span,{className:\"token function\",children:\"git\"}),` merge-base main yourBranch\n`]}),(0,a.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,a.jsxs)(e.span,{className:\"code-line\",children:[(0,a.jsx)(e.span,{className:\"token comment\",children:\"# note commit hash\"}),`\n`]}),(0,a.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,a.jsxs)(e.span,{className:\"code-line\",children:[(0,a.jsx)(e.span,{className:\"token function\",children:\"git\"}),\" reset \",(0,a.jsx)(e.span,{className:\"token parameter variable\",children:\"--soft\"}),\" \",(0,a.jsx)(e.span,{className:\"token comment\",children:\"# enter commit hash\"}),`\n`]}),(0,a.jsx)(e.span,{className:\"code-line\",children:`\n`}),(0,a.jsxs)(e.span,{className:\"code-line\",children:[(0,a.jsx)(e.span,{className:\"token comment\",children:\"# all changes can now be committed again\"}),`\n`]})]})}),`\n`,(0,a.jsx)(e.p,{children:\"It's easier on *nix using the following oneliner:\"}),`\n`,(0,a.jsx)(e.pre,{className:\"language-bash\",children:(0,a.jsx)(e.code,{className:\"language-bash code-highlight\",children:(0,a.jsxs)(e.span,{className:\"code-line\",children:[(0,a.jsx)(e.span,{className:\"token function\",children:\"git\"}),\" reset \",(0,a.jsxs)(e.span,{className:\"token variable\",children:[(0,a.jsx)(e.span,{className:\"token variable\",children:\"$(\"}),(0,a.jsx)(e.span,{className:\"token function\",children:\"git\"}),\" merge-base main \",(0,a.jsx)(e.span,{className:\"token punctuation\",children:\"$(\"}),\"git rev-parse --abbrev-ref HEAD\",(0,a.jsx)(e.span,{className:\"token punctuation\",children:\")\"}),(0,a.jsx)(e.span,{className:\"token variable\",children:\")\"})]}),`\n`]})})}),`\n`,(0,a.jsxs)(e.h2,{id:\"rebasing-without-pulling-main\",children:[(0,a.jsx)(e.a,{className:\"anchor\",href:\"#rebasing-without-pulling-main\",children:(0,a.jsx)(e.span,{className:\"icon icon-link\"})}),\"Rebasing without pulling main\"]}),`\n`,(0,a.jsx)(e.p,{children:\"Rebase using the remote main to make sure you're really up to date. Useful when updating merge requests (on GitLab).\"}),`\n`,(0,a.jsx)(e.pre,{className:\"language-bash\",children:(0,a.jsx)(e.code,{className:\"language-bash code-highlight\",children:(0,a.jsxs)(e.span,{className:\"code-line\",children:[(0,a.jsx)(e.span,{className:\"token function\",children:\"git\"}),\" pull \",(0,a.jsx)(e.span,{className:\"token parameter variable\",children:\"--rebase\"}),` origin main\n`]})})}),`\n`,(0,a.jsxs)(e.h2,{id:\"copy-file-from-main-to-current-branch\",children:[(0,a.jsx)(e.a,{className:\"anchor\",href:\"#copy-file-from-main-to-current-branch\",children:(0,a.jsx)(e.span,{className:\"icon icon-link\"})}),\"Copy file from main to current branch\"]}),`\n`,(0,a.jsx)(e.pre,{className:\"language-bash\",children:(0,a.jsx)(e.code,{className:\"language-bash code-highlight\",children:(0,a.jsxs)(e.span,{className:\"code-line\",children:[(0,a.jsx)(e.span,{className:\"token function\",children:\"git\"}),` checkout main -- yarn.lock\n`]})})}),`\n`,(0,a.jsxs)(e.h2,{id:\"useful-aliases\",children:[(0,a.jsx)(e.a,{className:\"anchor\",href:\"#useful-aliases\",children:(0,a.jsx)(e.span,{className:\"icon icon-link\"})}),\"Useful aliases\"]}),`\n`,(0,a.jsxs)(e.h3,{id:\"add-all-and-commit\",children:[(0,a.jsx)(e.a,{className:\"anchor\",href:\"#add-all-and-commit\",children:(0,a.jsx)(e.span,{className:\"icon icon-link\"})}),\"Add all and commit\"]}),`\n`,(0,a.jsx)(e.pre,{className:\"language-bash\",children:(0,a.jsx)(e.code,{className:\"language-bash code-highlight\",children:(0,a.jsxs)(e.span,{className:\"code-line\",children:[(0,a.jsx)(e.span,{className:\"token assign-left variable\",children:\"ac\"}),(0,a.jsx)(e.span,{className:\"token operator\",children:\"=\"}),(0,a.jsx)(e.span,{className:\"token operator\",children:\"!\"}),\"git \",(0,a.jsx)(e.span,{className:\"token function\",children:\"add\"}),\" \",(0,a.jsx)(e.span,{className:\"token builtin class-name\",children:\".\"}),\" \",(0,a.jsx)(e.span,{className:\"token operator\",children:\"&&\"}),\" \",(0,a.jsx)(e.span,{className:\"token function\",children:\"git\"}),` commit\n`]})})}),`\n`,(0,a.jsxs)(e.h3,{id:\"pretty-log\",children:[(0,a.jsx)(e.a,{className:\"anchor\",href:\"#pretty-log\",children:(0,a.jsx)(e.span,{className:\"icon icon-link\"})}),\"Pretty log\"]}),`\n`,(0,a.jsx)(e.pre,{className:\"language-bash\",children:(0,a.jsx)(e.code,{className:\"language-bash code-highlight\",children:(0,a.jsxs)(e.span,{className:\"code-line\",children:[(0,a.jsx)(e.span,{className:\"token function\",children:\"ls\"}),\" \",(0,a.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" log \",(0,a.jsx)(e.span,{className:\"token parameter variable\",children:\"--graph\"}),\" \",(0,a.jsx)(e.span,{className:\"token parameter variable\",children:\"--pretty\"}),(0,a.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\"format:\",(0,a.jsx)(e.span,{className:\"token string\",children:\"'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)<%an>%Creset'\"}),` --abbrev-commit\n`]})})}),`\n`,(0,a.jsxs)(e.h3,{id:\"update-last-commit-with-current-changes\",children:[(0,a.jsx)(e.a,{className:\"anchor\",href:\"#update-last-commit-with-current-changes\",children:(0,a.jsx)(e.span,{className:\"icon icon-link\"})}),\"Update last commit with current changes\"]}),`\n`,(0,a.jsx)(e.pre,{className:\"language-bash\",children:(0,a.jsx)(e.code,{className:\"language-bash code-highlight\",children:(0,a.jsxs)(e.span,{className:\"code-line\",children:[\"amen \",(0,a.jsx)(e.span,{className:\"token operator\",children:\"=\"}),\" \",(0,a.jsx)(e.span,{className:\"token operator\",children:\"!\"}),\"git \",(0,a.jsx)(e.span,{className:\"token function\",children:\"add\"}),\" \",(0,a.jsx)(e.span,{className:\"token parameter variable\",children:\"--all\"}),\" \",(0,a.jsx)(e.span,{className:\"token operator\",children:\"&&\"}),\" \",(0,a.jsx)(e.span,{className:\"token function\",children:\"git\"}),\" commit \",(0,a.jsx)(e.span,{className:\"token parameter variable\",children:\"--amend\"}),`\n`]})})}),`\n`,(0,a.jsxs)(e.h3,{id:\"undo-last-commit\",children:[(0,a.jsx)(e.a,{className:\"anchor\",href:\"#undo-last-commit\",children:(0,a.jsx)(e.span,{className:\"icon icon-link\"})}),\"Undo last commit\"]}),`\n`,(0,a.jsx)(e.pre,{className:\"language-bash\",children:(0,a.jsx)(e.code,{className:\"language-bash code-highlight\",children:(0,a.jsxs)(e.span,{className:\"code-line\",children:[(0,a.jsx)(e.span,{className:\"token function\",children:\"git\"}),\" reset \",(0,a.jsx)(e.span,{className:\"token parameter variable\",children:\"--soft\"}),` HEAD^\n`]})})}),`\n`,(0,a.jsx)(e.p,{children:\"Or add as an alias:\"}),`\n`,(0,a.jsx)(e.pre,{className:\"language-bash\",children:(0,a.jsx)(e.code,{className:\"language-bash code-highlight\",children:(0,a.jsxs)(e.span,{className:\"code-line\",children:[(0,a.jsx)(e.span,{className:\"token function\",children:\"git\"}),\" config \",(0,a.jsx)(e.span,{className:\"token parameter variable\",children:\"--global\"}),\" alias.undo \",(0,a.jsx)(e.span,{className:\"token string\",children:\"'reset --soft HEAD^'\"}),`\n`]})})}),`\n`,(0,a.jsxs)(e.h2,{id:\"oh-no-i-deleted-all-my-work\",children:[(0,a.jsx)(e.a,{className:\"anchor\",href:\"#oh-no-i-deleted-all-my-work\",children:(0,a.jsx)(e.span,{className:\"icon icon-link\"})}),\"Oh no, I deleted all my work!?\"]}),`\n`,(0,a.jsx)(e.p,{children:\"Use the following command:\"}),`\n`,(0,a.jsx)(e.pre,{className:\"language-bash\",children:(0,a.jsx)(e.code,{className:\"language-bash code-highlight\",children:(0,a.jsxs)(e.span,{className:\"code-line\",children:[(0,a.jsx)(e.span,{className:\"token function\",children:\"git\"}),` reflog\n`]})})}),`\n`,(0,a.jsxs)(e.p,{children:[\"and \",(0,a.jsx)(e.code,{children:\"cherry-pick\"}),\" any commits you think could still have all your work.\"]}),`\n`,(0,a.jsxs)(e.h2,{id:\"if-gitignore-is-not-working\",children:[(0,a.jsx)(e.a,{className:\"anchor\",href:\"#if-gitignore-is-not-working\",children:(0,a.jsx)(e.span,{className:\"icon icon-link\"})}),\"If .gitignore is not working\"]}),`\n`,(0,a.jsx)(e.p,{children:\"Do:\"}),`\n`,(0,a.jsx)(e.pre,{className:\"language-bash\",children:(0,a.jsx)(e.code,{className:\"language-bash code-highlight\",children:(0,a.jsxs)(e.span,{className:\"code-line\",children:[(0,a.jsx)(e.span,{className:\"token function\",children:\"git\"}),\" \",(0,a.jsx)(e.span,{className:\"token function\",children:\"rm\"}),\" \",(0,a.jsx)(e.span,{className:\"token parameter variable\",children:\"-r\"}),\" \",(0,a.jsx)(e.span,{className:\"token parameter variable\",children:\"--cached\"}),\" \",(0,a.jsx)(e.span,{className:\"token builtin class-name\",children:\".\"}),`\n`]})})}),`\n`,(0,a.jsx)(e.p,{children:\"And after that:\"}),`\n`,(0,a.jsx)(e.pre,{className:\"language-bash\",children:(0,a.jsx)(e.code,{className:\"language-bash code-highlight\",children:(0,a.jsxs)(e.span,{className:\"code-line\",children:[(0,a.jsx)(e.span,{className:\"token function\",children:\"git\"}),\" \",(0,a.jsx)(e.span,{className:\"token function\",children:\"add\"}),\" \",(0,a.jsx)(e.span,{className:\"token parameter variable\",children:\"--all\"}),`\n`]})})}),`\n`,(0,a.jsxs)(e.h2,{id:\"case-insensitivity-macos\",children:[(0,a.jsx)(e.a,{className:\"anchor\",href:\"#case-insensitivity-macos\",children:(0,a.jsx)(e.span,{className:\"icon icon-link\"})}),\"Case insensitivity MacOS\"]}),`\n`,(0,a.jsx)(e.p,{children:\"MacOS by default ignores case in filenames and directories. Those differences go unnoticed until you push your working code to CI, where the build fails. To fix this once and for all use:\"}),`\n`,(0,a.jsx)(e.pre,{className:\"language-bash\",children:(0,a.jsx)(e.code,{className:\"language-bash code-highlight\",children:(0,a.jsxs)(e.span,{className:\"code-line\",children:[(0,a.jsx)(e.span,{className:\"token function\",children:\"git\"}),\" config \",(0,a.jsx)(e.span,{className:\"token parameter variable\",children:\"--global\"}),\" core.ignorecase \",(0,a.jsx)(e.span,{className:\"token boolean\",children:\"false\"}),`\n`]})})}),`\n`,(0,a.jsxs)(e.h2,{id:\"after-rebasing\",children:[(0,a.jsx)(e.a,{className:\"anchor\",href:\"#after-rebasing\",children:(0,a.jsx)(e.span,{className:\"icon icon-link\"})}),\"After Rebasing\"]}),`\n`,(0,a.jsx)(e.p,{children:\"Instead of using -f or --force developers should use\"}),`\n`,(0,a.jsx)(e.pre,{className:\"language-bash\",children:(0,a.jsx)(e.code,{className:\"language-bash code-highlight\",children:(0,a.jsxs)(e.span,{className:\"code-line\",children:[(0,a.jsx)(e.span,{className:\"token function\",children:\"git\"}),` push --force-with-lease\n`]})})}),`\n`,(0,a.jsx)(e.p,{children:\"Why? Because it checks the remote branch for changes which is a good idea. Let's imagine that James and Lisa are working on the same feature branch and Lisa has pushed a commit. James now rebases his local branch and is rejected when trying to push. Of course James thinks this is due to rebase and uses --force and would rewrite all Lisa's changes. If James had used --force-with-lease he would have received a warning that there are commits done by someone else. I don't see why anyone would use --force instead of --force-with-lease when pushing after a rebase.\"}),`\n`,(0,a.jsxs)(e.p,{children:[\"Source: \",(0,a.jsx)(e.a,{href:\"https://stackoverflow.com/questions/8939977/git-push-rejected-after-feature-branch-rebase\",children:\"https://stackoverflow.com/questions/8939977/git-push-rejected-after-feature-branch-rebase\"})]})]})}function d(n={}){let{wrapper:e}=n.components||{};return e?(0,a.jsx)(e,{...n,children:(0,a.jsx)(h,{...n})}):h(n)}return w(v);})();\n;return Component;",
  "readingTime": {
    "text": "3 min read",
    "minutes": 2.02,
    "time": 121200,
    "words": 404
  }
}